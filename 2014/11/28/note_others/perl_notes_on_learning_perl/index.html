<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>《Learning PERL》笔记 | Central Perk</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="[TOC]
scalar和array的记法
12$calar --&gt; scalar@rray --&gt; array

还是挺巧妙的, 不过%hash就没什么的了.
字符串tricks
犀利的qw
qw表示quoted words：
12qw(fred barney betty wilma dino)# equals ('fred', 'barney', 'betty', 'wilma',">
<meta property="og:type" content="article">
<meta property="og:title" content="《Learning PERL》笔记">
<meta property="og:url" content="http://yoursite.com/2014/11/28/note_others/perl_notes_on_learning_perl/">
<meta property="og:site_name" content="Central Perk">
<meta property="og:description" content="[TOC]
scalar和array的记法
12$calar --&gt; scalar@rray --&gt; array

还是挺巧妙的, 不过%hash就没什么的了.
字符串tricks
犀利的qw
qw表示quoted words：
12qw(fred barney betty wilma dino)# equals ('fred', 'barney', 'betty', 'wilma',">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="《Learning PERL》笔记">
<meta name="twitter:description" content="[TOC]
scalar和array的记法
12$calar --&gt; scalar@rray --&gt; array

还是挺巧妙的, 不过%hash就没什么的了.
字符串tricks
犀利的qw
qw表示quoted words：
12qw(fred barney betty wilma dino)# equals ('fred', 'barney', 'betty', 'wilma',">

  
    <link rel="alternative" href="/atom.xml" title="Central Perk" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">

  <!--[if lt IE 9]><script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7/html5shiv.min.js"></script><![endif]-->
  
</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Central Perk</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Ignorance is a rare rare blessing~</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="http://www.baidu.com/baidu" method="get" accept-charset="utf-8" class="search-form">
          <input type="search" name="word" maxlength="20" class="search-form-input" placeholder="Search">
          <input type="submit" value="" class="search-form-submit">
          <input name=tn type=hidden value="bds">
          <input name=cl type=hidden value="3">
          <input name=ct type=hidden value="2097152">
          <input type="hidden" name="si" value="yoursite.com">
        </form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-note_others/perl_notes_on_learning_perl" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/11/28/note_others/perl_notes_on_learning_perl/" class="article-date">
  <time datetime="2014-11-28T03:16:23.000Z" itemprop="datePublished">Nov 28 2014</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      《Learning PERL》笔记
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>[TOC]</p>
<h1 id="scalar和array的记法">scalar和array的记法</h1>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="variable">$calar</span> --&gt; <span class="keyword">scalar</span></div><div class="line"><span class="variable">@rray</span> --&gt; array</div></pre></td></tr></table></figure>

<p>还是挺巧妙的, 不过<code>%hash</code>就没什么的了.</p>
<h1 id="字符串tricks">字符串tricks</h1>
<h2 id="犀利的qw">犀利的qw</h2>
<p>qw表示quoted words：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="string">qw(fred barney betty wilma dino)</span></div><div class="line"><span class="comment"># equals ("fred", "barney", "betty", "wilma", "dino")</span></div></pre></td></tr></table></figure>

<p>此外, 用了qw就不限于用括号序对了, 可以用的序对符有:</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">qw</span>!...!</div><div class="line"><span class="keyword">qw</span>/.../</div><div class="line"><span class="keyword">qw</span><span class="comment">#...#</span></div><div class="line"><span class="string">qw{...}</span></div><div class="line"><span class="string">qw[...]</span></div><div class="line"><span class="string">qw&lt;...&gt;</span></div><div class="line">...</div></pre></td></tr></table></figure>

<p>好灵活的。</p>
<h2 id="a-b递增数字序列">a..b递增数字序列</h2>
<p>生成<code>(a, a+1, a+2,..., b-1, b)</code>,这里当然b是要大于a的. 测试了一下, a大于b的话返回的是一个空列表.</p>
<a id="more"></a>


<h2 id="字符串插值">字符串插值</h2>
<p><code>&quot;@array&quot;</code>与<code>&#39;@array&#39;</code>是不同的, 前者会进行列表值的插入展开, 而后者则是原始的literal字符串不进行展开.</p>
<p>插值的形式不止于此, 比如<code>&quot;\Lstr&quot;</code>会将<code>str</code>全都变成小写, 相应的<code>&quot;\Ustr&quot;</code>会将字符串全都变成大写字母.</p>
<h2 id="字符串duplicate">字符串duplicate</h2>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="string">"fred"</span>x3 <span class="comment"># 'x' not '*'</span></div><div class="line">&gt;<span class="string">"fredfredfred"</span></div></pre></td></tr></table></figure>

<p>相当于python里的<code>str*n</code>, PERL在这方面果然不会落后.</p>
<h2 id="格式化字符串">格式化字符串</h2>
<p>用的是<code>%</code>:</p>
<ul>
<li><code>%g</code>, 指定自动数字形式;</li>
<li><code>%-n</code>, 指定宽度为n个字符, 左对齐;</li>
<li><code>%n</code>, 指定宽度为n个字符, 右对齐;</li>
<li><code>%%</code>, 输出百分号%</li>
</ul>
<p>可变宽度的字符串可以用:</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">printf</span> <span class="string">"<span class="variable">%$</span>{width}s..."</span> <span class="variable">$str</span></div><div class="line"><span class="keyword">printf</span> <span class="string">"<span class="variable">%*</span>s..."</span> ,<span class="variable">$width</span>, <span class="variable">$str</span></div></pre></td></tr></table></figure>

<p><code>sprintf</code>函数也接收格式化字符串, 不过不打印出来, 而是用于保存到变量里.</p>
<p>这样的两种形式.</p>
<h1 id="$#&lt;list_name&gt;列表长度(-1)"><code>$#&lt;list_name&gt;</code>列表长度(-1)</h1>
<p>返回的是list的个数-1,因此可以使用<code>$list_name[$#list_name]</code>来获取列表的最后一个值.</p>
<h1 id="build-in函数杂计">build-in函数杂计</h1>
<h2 id="splice">splice</h2>
<p>原型是: </p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">splice</span> (arg1, arg2[, arg3[, arg4]])</div><div class="line"><span class="comment">#instance</span></div><div class="line"><span class="variable">@remove</span> = <span class="keyword">splice</span>(arg1, ...)</div></pre></td></tr></table></figure>

<p>arg1为目标列表, arg2为起始位置(从1开始计), arg3为作用的长度, arg4为替换进去的列表.<br>示例中<code>@remove</code>为切出的列表, <code>arg1</code>为作用后的结果列表, 与直觉不相符呢.</p>
<p>而且要注意的是在列表遍历中(典型的如foreach)中对遍历成员的操作会影响目标列表, 这个或许是splice的这种行为的原因.</p>
<h2 id="unlink和glob"><code>unlink</code>和<code>glob</code></h2>
<p><code>unlink</code>和<code>glob</code>相当于shell中的<code>rm</code>和<code>glob</code>, 即<code>unlink glob &#39;*.o&#39;</code>就相当于在shell中执行<code>rm *.o</code>, 不过推荐的执行方式如下:</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">foreach</span> <span class="keyword">my</span> <span class="variable">$file</span> (<span class="keyword">glob</span> <span class="string">"*.o"</span>){</div><div class="line">    <span class="keyword">unlink</span> <span class="variable">$file</span> <span class="keyword">or</span> <span class="keyword">warn</span> <span class="string">"...<span class="variable">$!</span>"</span>;</div><div class="line">}</div></pre></td></tr></table></figure>

<h2 id="index和rindex"><code>index</code>和<code>rindex</code></h2>
<p>直接看例子:</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="variable">$location_int</span> = <span class="keyword">index</span> <span class="variable">@heap</span>, <span class="variable">$needle</span>;</div></pre></td></tr></table></figure>

<p><code>$location_int</code>为<code>@heap</code>中首次出现<code>$needle</code>的位置.</p>
<p>还有个<code>rindex</code>是反向查找.</p>
<h2 id="grep"><code>grep</code></h2>
<p><code>grep</code>跟shell里的<code>grep</code>没有关系, 其实跟FP里的<code>filter</code>是一个意思, 直接看代码示例吧:</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">my</span> <span class="variable">@odd_number</span> = <span class="keyword">grep</span> {<span class="variable">$_</span><span class="variable">%2</span>} <span class="number">1</span>..<span class="number">1000</span>;</div><div class="line"><span class="keyword">my</span> <span class="variable">@matching_lines</span> = <span class="keyword">grep</span> <span class="regexp">/\bfred\b/i</span>, &lt;<span class="variable">$fh</span>&gt;;</div><div class="line"><span class="keyword">my</span> <span class="variable">$matching_lines_count</span> = <span class="keyword">grep</span> <span class="regexp">/\bfred\b/i</span>, &lt;<span class="variable">$fh</span>&gt;;</div></pre></td></tr></table></figure>

<p>最后一条加了一个context变换的trick而已.</p>
<h1 id="特殊变量">特殊变量</h1>
<h2 id="$_默认变量"><code>$_</code>默认变量</h2>
<p>直接上代码好了:</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">foreach</span> (<span class="number">1</span>..<span class="number">10</span>) {</div><div class="line">    <span class="keyword">print</span> <span class="variable">$_</span>;</div><div class="line">}</div><div class="line"><span class="comment">#12345678910</span></div><div class="line"><span class="variable">$_</span> = <span class="string">"hahah"</span></div><div class="line"><span class="keyword">print</span>;</div><div class="line"><span class="comment">#hahah</span></div></pre></td></tr></table></figure>

<p><code>$_</code>在这里起到了一个表达式”管道”的作用.</p>
<h2 id="函数中的@_">函数中的<code>@_</code></h2>
<p><code>@_</code>是函数的私有变量, 表示函数的参数列表, 可以用<code>$_[n]</code>来进行逐个索引访问.</p>
<p><code>@_</code>跟默认变量<code>$_</code>是没有任何关系的.</p>
<h2 id="命令行参数@ARGV与钻石操作符&lt;&gt;">命令行参数<code>@ARGV</code>与钻石操作符<code>&lt;&gt;</code></h2>
<p>命令行的参数保存在<code>@ARGV</code>里. </p>
<p><code>&lt;&gt;</code>将<code>@ARGV</code>中指定全部文件打开并将文件句柄全都存储在<code>&lt;&gt;</code>内, 当然<code>@ARGV</code>也可以显式的认为修改. 如果<code>@ARGV</code>中没有参数, 则<code>&lt;&gt;</code>使用<code>&lt;STDIN&gt;</code>.</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">while</span> (&lt;&gt;) {</div><div class="line">    <span class="keyword">print</span>;</div><div class="line">}</div></pre></td></tr></table></figure>

<h2 id="$!"><code>$!</code></h2>
<p><code>$!</code>中存放着系统错误信息.</p>
<p>上面的代码等价于一个<code>cat</code>命令, 当然这个命令可以写的更简单一点: <code>print &lt;&gt;</code>.</p>
<h2 id="$1,_$2,_-_$n"><code>$1, $2, ... $n</code></h2>
<p>为正则表达式匹配之后的分组内容捕获, 各个变量表示分组匹配的内容.</p>
<h2 id="正则表达式默认匹配变量">正则表达式默认匹配变量</h2>
<p><code>$(apostrophe)$&amp;$&#39;</code>为正则表达式匹配之后的默认变量, $`表示匹配内容之前的字符串, <code>$&amp;</code>表示匹配的字符串, <code>$&#39;</code>表示匹配内容之后的字符串.</p>
<h2 id="$^I备份文件变量"><code>$^I</code>备份文件变量</h2>
<p>用<code>$^I = &quot;*.bak&quot;</code>这样的形式来设置备份文件.</p>
<h2 id="$a和$b"><code>$a</code>和<code>$b</code></h2>
<p>排序子程序中的默认变量, 表示要进行比较的两个输入.</p>
<h1 id="上下文context">上下文context</h1>
<p><code>@array</code>在列表上下文中返回列表的列表项目值, 在标量上下文中返回列表元素的个数, <code>scalar @array</code>会强制制造标量上下文, 返回<code>@array</code>的列表元素个数.</p>
<h1 id="&lt;STDIN&gt;标准输入"><code>&lt;STDIN&gt;</code>标准输入</h1>
<p><code>&lt;STDIN&gt;</code>其实是一个句柄啦, 指向标准输入, 也就是键盘, 标准用法是这样的:</p>
<pre><code><span class="tag">chomp</span>(<span class="at_rule">@<span class="keyword">lines</span> = &lt;STDIN&gt;)</span>;
</code></pre><p>表示读取C-D之前的所有键盘输入内容, 每行去掉换行符然后存到列表<code>@lines</code>里面.</p>
<h1 id="函数">函数</h1>
<h2 id="定义与调用">定义与调用</h2>
<p>定义格式为:</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="sub"><span class="keyword">sub</span> sub_name{</span></div><div class="line">...</div><div class="line">}</div></pre></td></tr></table></figure>

<p>调用的格式为:</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&sub_name;</div></pre></td></tr></table></figure>

<p>在调用时, 如果没有跟build-in函数名冲突, 可以不用加<code>&amp;</code>符号(build-in函数是不用加符号的). 其实这种设置灵活是零活, 但是还是都加<code>&amp;</code>的好.</p>
<p>另外, 函数结束前执行的最后一步的结果会作为返回值, 除非显式的使用<code>return</code>. 这个的话依然还是统一用<code>return</code>比较好.</p>
<h2 id="my创建变量"><code>my</code>创建变量</h2>
<p>使用<code>my</code>可以创建作用域内的变量, 典型的就是函数内部啦:</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="sub"><span class="keyword">sub</span> sub_name{</span></div><div class="line">    <span class="keyword">my</span> (<span class="variable">$m</span>, <span class="variable">$n</span>) = <span class="variable">@_</span>;</div><div class="line">    ...</div><div class="line">}</div></pre></td></tr></table></figure>

<p>此外, 还可以用于if, while, foreach的作用域内, 比如:</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">foreach</span> <span class="keyword">my</span> <span class="variable">$rock</span> (<span class="variable">@rocks</span>){</div><div class="line">...</div><div class="line">}</div></pre></td></tr></table></figure>

<h2 id="state"><code>state</code></h2>
<p>用<code>state</code>创建的是函数的<strong>静态变量</strong>.</p>
<h1 id="for和foreach">for和foreach</h1>
<p><code>foreach</code>是<code>for</code>的一个子集, <code>for(@args)</code>和<code>foreach(@args)</code>是可以互相替换的, 此外<code>for</code>的另外的用法就是常见的<code>for($i = 0; $i &lt; n; $i++)</code>.</p>
<h1 id="文件句柄">文件句柄</h1>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">open</span> CONFIG, <span class="string">'dino'</span>; <span class="comment">#default mode(read)</span></div><div class="line"><span class="keyword">open</span> OCNFIG, <span class="string">'&lt;dino'</span>; <span class="comment">#read only mode</span></div><div class="line"><span class="keyword">open</span> REDROCK, <span class="string">'&gt;fred'</span>; <span class="comment">#write mode, create file if not exists</span></div><div class="line"><span class="keyword">open</span> LOG, <span class="string">'&gt;&gt;logfile'</span>; <span class="comment">#append mode, create file if not exists</span></div><div class="line"></div><div class="line"><span class="keyword">print</span> LOG <span class="string">"log info..."</span></div><div class="line"><span class="keyword">select</span> LOG</div><div class="line"><span class="keyword">print</span> <span class="string">"log info"</span></div></pre></td></tr></table></figure>

<p>要注意使用的文件符为单引号, 读写指定符跟命令行的管道重定向符号是一致的. 往文件里面添加内容直接使用第6行的格式即可.</p>
<p><code>select</code>可以选择默认句柄, 用来取代<code>STDIN</code>和<code>STDOUT</code>.</p>
<h1 id="hash">hash</h1>
<p><code>%var</code>表示一个哈希变量.</p>
<h2 id="hash的reverse">hash的reverse</h2>
<pre><code><span class="keyword">my</span> <span class="variable">%inverse_hash</span> = <span class="keyword">reverse</span> <span class="variable">%any_hash</span>;
</code></pre><p>使原来的k-v对转换为v-k对, 根据hash的默认属性, 这样翻转需要原先的v中没有重复值, 不然就会出现转换后k值的覆盖.</p>
<h2 id="keys,_values函数">keys, values函数</h2>
<p>分别返回哈希表的键列表和值列表:</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">foreach</span> <span class="variable">$key</span> (<span class="keyword">sort</span> <span class="keyword">keys</span> <span class="variable">%hash</span>) {</div><div class="line">    <span class="variable">$hash</span>{<span class="variable">$key</span>} = ...</div><div class="line">    ...</div><div class="line">}</div></pre></td></tr></table></figure>

<p>另外<code>each</code>可以直接返回键值对:</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">while</span>((<span class="variable">$k</span>, <span class="variable">$v</span>) = <span class="keyword">each</span> <span class="variable">%hash</span>)</div></pre></td></tr></table></figure>

<h1 id="正则表达式">正则表达式</h1>
<h2 id="属性元字符">属性元字符</h2>
<p>形式为: <code>\p{property}</code>, 比较重要的几个列举如下:</p>
<ul>
<li><code>\p{Space}</code>: 表示Unicode中定义的空格;</li>
<li><code>\p{Digit}</code>: 表示Unicode中定义的数字;</li>
<li><code>\p{Hex}</code>: 表示16进制字符, 相当于<code>[0-9A-Fa-f]</code>;</li>
<li><code>\P{property}</code>: 表示反义;</li>
</ul>
<p>具体的内容查阅<code>perluniprops</code>吧.</p>
<h2 id="括号分组">括号分组</h2>
<p>正则表达式中的组号以左括号从左至右的顺序从1开始编号, <code>\1, \2, ... \n</code>为正则表达式中的引用, <code>$1, $2, ...$n</code>为正则表达式匹配之后的组内容捕获.</p>
<p>另外可以使用<code>\g{n}</code>这样的形式, 以消除<code>\111</code>这样的歧义(<code>\111</code>表示第111组, 还是第1组后面跟11还是表示11组后面跟1呢?).</p>
<p>更研究的方法是用label来命名分组—<code>(?&lt;label_name&gt;pattern)</code>, 然后用<code>\g{label_name}</code>引用, 用<code>${label_name}</code>来获取捕获内容.</p>
<p><code>(?:pattern)</code>表示不占用组号的分组.</p>
<h2 id="默认匹配变量">默认匹配变量</h2>
<p><code>$(apostrophe)$&amp;$&#39;</code>为正则表达式匹配之后的默认变量, $`表示匹配内容之前的字符串, <code>$&amp;</code>表示匹配的字符串, <code>$&#39;</code>表示匹配内容之后的字符串, 一个可以用来做正则匹配调试的程序如下:</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">while</span>(&lt;&gt;){</div><div class="line">    <span class="keyword">chomp</span>;</div><div class="line">    <span class="keyword">if</span> (<span class="regexp">/pattern/</span>){</div><div class="line">        <span class="keyword">print</span> <span class="string">"matched: |<span class="variable">$`</span>&lt;<span class="variable">$&</span>&gt;<span class="variable">$'</span>\n"</span>;</div><div class="line">    } <span class="keyword">else</span> {</div><div class="line">        <span class="keyword">print</span> <span class="string">"No match: |<span class="variable">$_</span>|\n"</span>;</div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure>

<h2 id="匹配选项">匹配选项</h2>
<p>写在正则表达式的最后面—<code>/pattern/option_mark</code>, 常用的选项有:</p>
<ul>
<li><code>/g</code>: 获取所有的匹配, 即返回到一个array而不是scalar里;</li>
<li><code>/i</code>: 忽略大小写;</li>
<li><code>/s</code>: 使<code>.</code>匹配<code>\n</code>;</li>
<li><code>/x</code>: 忽略正则表达式中的空格, 使用这个选项可以写出可能性明显提升的正则表达式, 因为使用了这个选项就可以对正则表达式进行断行了, 并且可以在每行都写上注释.</li>
</ul>
<h1 id="单行流例程">单行流例程</h1>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">[usr<span class="variable">@comp</span> ~]$ perl -p -i.bak -w -e <span class="string">'s/Randall/Randal/g'</span> *.dat</div><div class="line"></div><div class="line"><span class="comment">#!/usr/bin/perl -w</span></div><div class="line"><span class="variable">$^I</span> = <span class="string">".bak"</span>;</div><div class="line"><span class="keyword">while</span> (&lt;&gt;) {</div><div class="line">    <span class="regexp">s/Randall/Randal/g</span>;</div><div class="line">    <span class="keyword">print</span>;</div><div class="line">}</div></pre></td></tr></table></figure>

<p><code>-p</code>相当于是:</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">while</span> (&lt;&gt;) {</div><div class="line">    <span class="string">"-e stuff"</span></div><div class="line">    <span class="keyword">print</span>;</div><div class="line">}</div></pre></td></tr></table></figure>

<p>意思是打印每一行, <code>-e</code>指定的内容就填充到<code>print</code>这一句之上.</p>
<p><code>-w</code>相当于是代码中的第一行, 打开warning开关的意思, <code>-i.bak</code>就相当于是<code>$^I = &quot;.bak&quot;</code>设置同名备份文件的意思了.</p>
<h1 id="模块使用">模块使用</h1>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">use</span> File::Basename <span class="keyword">qw</span>/.../</div></pre></td></tr></table></figure>

<p>表示引入模块中的<code>...</code>函数, 为空的话表示不引入.</p>
<h2 id="Try::Tiny">Try::Tiny</h2>
<p>用了这个模块就可以用<code>try catch</code>了. 不过这个模块需要从CPAN中下载.</p>
<h2 id="List::Util">List::Util</h2>
<p>标准库中的列表处理库, 里面有<code>shuffle(@list)</code>这种函数, 应该很实用.</p>
<h1 id="排序子程序">排序子程序</h1>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="sub"><span class="keyword">sub</span> by_name {</span></div><div class="line">    <span class="keyword">if</span> (<span class="variable">$a</span> &lt; <span class="variable">$b</span>) -<span class="number">1</span>;</div><div class="line">    <span class="keyword">elsif</span> (<span class="variable">$a</span> &gt; <span class="variable">$b</span>) <span class="number">1</span>;</div><div class="line">    <span class="keyword">else</span> <span class="number">0</span>;</div><div class="line">}</div></pre></td></tr></table></figure>

<p>上面的这个就是一个排序程序, <code>$a</code>和<code>$b</code>表示顺序赋值的两个输入. 上面的程序用于<code>sort</code>的排序子程序中, 相当于<code>sort</code>的一个callback.</p>
<p>上面的程序表示按数值从大往小排序, 应用方式为:</p>
<pre><code>my @<span class="literal">result</span> = sort by_name @some_num;
</code></pre><p>可以替换为:</p>
<pre><code>my @<span class="literal">result</span> = sort {$a &lt;=&gt; $b} @some_num;
</code></pre><p>上面的那个排序程序也可以简化为:</p>
<pre><code><span class="sub"><span class="keyword">sub</span> by_name {</span><span class="variable">$a</span> &lt;=&gt; <span class="variable">$b</span>};
</code></pre><p>按字符排序的子程序写法是:</p>
<pre><code><span class="sub"><span class="keyword">sub</span> by_code_point {</span><span class="variable">$a</span> cmp <span class="variable">$b</span>}
</code></pre><p>这个就是<code>sort</code>的默认行为.</p>
<p>进行反向排序的话就交换一下两个排序变量的顺序就可以了.</p>
<p>ps: 排序子函数的函数名用<code>by_</code>前缀的形式似乎是个convention.</p>
<h2 id="哈希表多重排序应用">哈希表多重排序应用</h2>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">my</span> <span class="variable">%score</span>; <span class="comment"># a {name:score} hash</span></div><div class="line"></div><div class="line"><span class="sub"><span class="keyword">sub</span> by_score_and_name {</span></div><div class="line">    <span class="variable">$score</span>{<span class="variable">$b</span>} &lt;=&gt; <span class="variable">$score</span>{<span class="variable">$a</span>}</div><div class="line">    <span class="keyword">or</span></div><div class="line">    <span class="variable">$a</span> cmp <span class="variable">$b</span></div><div class="line">}</div></pre></td></tr></table></figure>

<p>上面的排序程序表示先按分数从小到大排序, 同分的话再按字母排序.</p>
<h1 id="数组切片和哈希切片">数组切片和哈希切片</h1>
<p>直接上代码说明, 数组切片:</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">my</span> <span class="variable">@names</span>;</div><div class="line">...</div><div class="line"><span class="keyword">my</span> (<span class="variable">$first</span>, <span class="variable">$last</span>) = (<span class="keyword">sort</span> <span class="variable">@names</span>)[<span class="number">0</span>, -<span class="number">1</span>];</div></pre></td></tr></table></figure>

<p>哈希切片:</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">my</span> <span class="variable">%score</span>;</div><div class="line">...</div><div class="line"><span class="keyword">my</span> <span class="variable">@three_scores</span> = <span class="variable">@score</span>{<span class="keyword">qw</span>/barney fred dino/};</div></pre></td></tr></table></figure>

<p>要注意哈希的上下文.</p>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://yoursite.com/2014/11/28/note_others/perl_notes_on_learning_perl/" data-id="elywni35aqr6p9qn" class="article-share-link" data-share="baidu">Share</a>
      

      

      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2015/01/09/note_emacs/writing_verilog/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          我的Verilog HDL代码快速编辑环境
        
      </div>
    </a>
  
  
    <a href="/2014/10/27/note_fpga/readmem/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">$readmem是可综合的</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  
    
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">August 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">July 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/02/">February 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/01/">January 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/11/">November 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/10/">October 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/08/">August 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/01/">January 2014</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/12/">December 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/11/">November 2013</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/10/">October 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/09/">September 2013</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/08/">August 2013</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/07/">July 2013</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/05/">May 2013</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/04/">April 2013</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/11/">November 2012</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/08/">August 2011</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/08/27/note_asic/uvm_factory/">UVM源码探索之Factory(上篇)</a>
          </li>
        
          <li>
            <a href="/2016/07/27/note_asic/verif_crafts/">Verification匠心</a>
          </li>
        
          <li>
            <a href="/2015/02/28/note_emacs/keyswitch/">一种同时适用于Vim和Emacs的改键方案</a>
          </li>
        
          <li>
            <a href="/2015/01/09/note_emacs/writing_verilog/">我的Verilog HDL代码快速编辑环境</a>
          </li>
        
          <li>
            <a href="/2014/11/28/note_others/perl_notes_on_learning_perl/">《Learning PERL》笔记</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Links</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="https://github.com/zhouchuanrui" target="_blank">github</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 Mr.Zhou<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
      .
      Theme by <a href="https://github.com/xiangming/landscape-plus" target="_blank">Landscape-plus</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<!-- 百度分享 start -->

<div id="article-share-box" class="article-share-box">
  <div id="bdshare" class="bdsharebuttonbox article-share-links">
    <a class="article-share-weibo" data-cmd="tsina" title="分享到新浪微博"></a>
    <a class="article-share-weixin" data-cmd="weixin" title="分享到微信"></a>
    <a class="article-share-qq" data-cmd="sqq" title="分享到QQ"></a>
    <a class="article-share-renren" data-cmd="renren" title="分享到人人网"></a>
    <a class="article-share-more" data-cmd="more" title="更多"></a>
  </div>
</div>
<script>window._bd_share_config={"common":{},"share":{"bdCustomStyle":"nocss.css"}};with(document)0[(getElementsByTagName("head")[0]||body).appendChild(createElement("script")).src="http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion="+~(-new Date()/36e5)];</script>

<!-- 百度分享 end -->

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>



<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>